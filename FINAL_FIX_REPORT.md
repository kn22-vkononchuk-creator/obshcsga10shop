# üîß –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø: –ü—Ä–æ–±–ª–µ–º–∞ –∑ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º —Ç–æ–≤–∞—Ä—ñ–≤ –∑ –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∑ –∫–æ—à–∏–∫–∞

## ‚ùå –í–∏—è–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞:
**–¢–æ–≤–∞—Ä–∏ –∑ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó "–ê–ª–∫–æ–≥–æ–ª—å —ñ –∫—É—Ä—ñ–Ω–Ω—è", –¥–æ–¥–∞–Ω—ñ –¥–æ –∫–æ—à–∏–∫–∞, –Ω–µ –º–æ–∂–Ω–∞ –±—É–ª–æ –≤–∏–¥–∞–ª–∏—Ç–∏ –ø—ñ—Å–ª—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü—ñ—ó —Ä–µ–∂–∏–º—É #alk**

### –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∏:
–§—É–Ω–∫—Ü—ñ—è `renderCart()` –Ω–µ –º–æ–≥–ª–∞ –∑–Ω–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä–∏ –∑ –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó, —Ç–æ–º—É —â–æ –º–∞—Å–∏–≤ `products` –Ω–µ –º—ñ—Å—Ç–∏–≤ –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ —Ç–æ–≤–∞—Ä–∏ –ø—ñ—Å–ª—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü—ñ—ó —Ä–µ–∂–∏–º—É #alk.

## ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:

### 1. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∫–æ—à–∏–∫–∞:**
```javascript
async function renderCart() {
    // –û—Ç—Ä–∏–º—É—î–º–æ –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏ –¥–ª—è –∫–æ—à–∏–∫–∞ (–≤–∫–ª—é—á–Ω–æ –∑ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–º–∏)
    const cartProducts = await Promise.all(
        cart.map(async (item) => {
            let product = products.find(p => p.id == item.id);
            if (!product) {
                product = await fetchHiddenProductForCart(item.id);
            }
            return { item, product };
        })
    );
    // ... —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
}
```

### 2. **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π:**
- `updateCartQuantity()` - —Ç–µ–ø–µ—Ä async
- `removeFromCart()` - —Ç–µ–ø–µ—Ä async  
- `showPage()` - —Ç–µ–ø–µ—Ä async –¥–ª—è –∫–æ—à–∏–∫–∞
- `handleHashChange()` - —Ç–µ–ø–µ—Ä async

### 3. **–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥:**
- –î–æ–¥–∞–Ω–æ `renderCartItem()` –¥–ª—è —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- –í–∏–¥–∞–ª–µ–Ω–æ –¥—É–±–ª—ñ–∫–∞—Ç –∫–æ–¥—É `renderCartOld()`
- –ü–æ–∫—Ä–∞—â–µ–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–æ–¥—ñ–π

### 4. **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:**
```javascript
// –û—Ç—Ä–∏–º—É—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏ –≤ –∫–æ—à–∏–∫—É (–≤–∫–ª—é—á–Ω–æ –∑ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–º–∏)
const orderItems = await Promise.all(cart.map(async (item) => {
    let product = products.find(p => p.id == item.id);
    if (!product) {
        product = await fetchHiddenProductForCart(item.id);
    }
    // ... –æ–±—Ä–æ–±–∫–∞
}));
```

## üõ°Ô∏è –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è PHP API:

### 1. **–ö—Ä–∞—â–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫:**
```php
function safe_json_response($data, $http_code = 200) {
    http_response_code($http_code);
    echo json_encode($data, JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES);
    exit();
}

function handle_error($message, $http_code = 500) {
    error_log("API Error: " . $message);
    safe_json_response(["status" => "error", "message" => $message], $http_code);
}
```

### 2. **–ü–æ–∫—Ä–∞—â–µ–Ω–æ CORS:**
- –î–æ–¥–∞–Ω–æ –±—ñ–ª—å—à–µ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ –¥–ª—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ
- –û–±—Ä–æ–±–∫–∞ preflight –∑–∞–ø–∏—Ç—ñ–≤ (OPTIONS)
- –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π charset

### 3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å:**
```php
function createTablesIfNotExist($conn) {
    // –°—Ç–≤–æ—Ä—é—î categories —Ç–∞ products —Ç–∞–±–ª–∏—Ü—ñ —è–∫—â–æ —ó—Ö –Ω–µ–º–∞—î
}
```

### 4. **–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
- –ü–æ–∫—Ä–∞—â–µ–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è API –∑–∞–ø–∏—Ç—ñ–≤
- –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ –¥—É–±–ª—ñ–∫–∞—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- –ö—Ä–∞—â—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏

## üÜò –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ–∞–π–ª–∏ –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

### `create_alcohol_category.php` (–≤–∏–¥–∞–ª–∏—Ç–∏ –ø—ñ—Å–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î –∫–∞—Ç–µ–≥–æ—Ä—ñ—é "–ê–ª–∫–æ–≥–æ–ª—å —ñ –∫—É—Ä—ñ–Ω–Ω—è" 
- –°—Ç–≤–æ—Ä—é—î –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ —è–∫—â–æ —ó—Ö –Ω–µ–º–∞—î
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —ñ—Å–Ω—É—é—á–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π

### `test_api.php` (–¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î –±–∞–∑–æ–≤—É —Ä–æ–±–æ—Ç—É PHP
- –ü–æ–∫–∞–∑—É—î –æ—Ç—Ä–∏–º–∞–Ω—ñ POST/GET –¥–∞–Ω—ñ  
- –ö–æ—Ä–∏—Å–Ω–æ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ API –ø—Ä–æ–±–ª–µ–º

## üîç –Ø–∫ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

### 1. **–¢–µ—Å—Ç –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑ –∫–æ—à–∏–∫–∞:**
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ `–≤–∞—à—Å–∞–π—Ç.com#alk`
2. –î–æ–¥–∞–π—Ç–µ —Ç–æ–≤–∞—Ä –∑ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó "–ê–ª–∫–æ–≥–æ–ª—å —ñ –∫—É—Ä—ñ–Ω–Ω—è" –¥–æ –∫–æ—à–∏–∫–∞
3. –£–±–µ—Ä—ñ—Ç—å `#alk` –∑ URL (–ø–æ–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –∑–≤–∏—á–∞–π–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É)  
4. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É –∫–æ—à–∏–∫ (`#cart`)
5. **–°–ø—Ä–æ–±—É–π—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ç–æ–≤–∞—Ä** - —Ç–µ–ø–µ—Ä —Ü–µ –ø–æ–≤–∏–Ω–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏! ‚úÖ

### 2. **–¢–µ—Å—Ç –∑–º—ñ–Ω–∏ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ:**
1. –í –∫–æ—à–∏–∫—É —Å–ø—Ä–æ–±—É–π—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—É –∑ –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –∫–Ω–æ–ø–∫–∏ + —Ç–∞ - 
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Ü—ñ–Ω–∞ –ø–µ—Ä–µ—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 3. **–¢–µ—Å—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:**
1. –ó —Ç–æ–≤–∞—Ä–∞–º–∏ –∑ –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –≤ –∫–æ—à–∏–∫—É
2. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Ñ–æ—Ä–º—É –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Å–ø—ñ—à–Ω–æ

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### ‚úÖ –ü—Ä–æ–±–ª–µ–º—É –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏—Ä—ñ—à–µ–Ω–æ:
- –¢–æ–≤–∞—Ä–∏ –∑ –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó **–º–æ–∂–Ω–∞ –≤–∏–¥–∞–ª—è—Ç–∏** –∑ –∫–æ—à–∏–∫–∞ ‚úì
- –¢–æ–≤–∞—Ä–∏ –∑ –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó **–º–æ–∂–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏** –≤ –∫–æ—à–∏–∫—É ‚úì  
- –¢–æ–≤–∞—Ä–∏ –∑ –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó **–º–æ–∂–Ω–∞ –æ—Ñ–æ—Ä–º–ª—è—Ç–∏** –≤ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—ñ ‚úì
- –ö–æ—à–∏–∫ **–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ—Ä–∞—Ö–æ–≤—É—î** —Å—É–º—É ‚úì
- –í–µ—Å—å —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª **–ø—Ä–∞—Ü—é—î –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ** ‚úì

### üîÑ –ó–±–µ—Ä–µ–∂–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:
- –ü—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –±–µ–∑ #alk ‚úì
- –ê–∫—Ç–∏–≤–∞—Ü—ñ—è —á–µ—Ä–µ–∑ #alk ‚úì
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ –ø—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü—ñ—ó ‚úì
- –í—Å—ñ —ñ—Å–Ω—É—é—á—ñ —Ñ—É–Ω–∫—Ü—ñ—ó —Å–∞–π—Ç—É ‚úì

## üöÄ –ì–æ—Ç–æ–≤–æ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!

–ö–æ–¥ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–∏–π —Ç–∞ –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ –≤–∞—à–æ–º—É —Å–∞–π—Ç—ñ. –ü—Ä–æ–±–ª–µ–º–∞ –∑ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º —Ç–æ–≤–∞—Ä—ñ–≤ –∑ –∫–æ—à–∏–∫–∞ –≤–∏—Ä—ñ—à–µ–Ω–∞!